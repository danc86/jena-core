<html>
<!-- (c) Copyright 2003, 2004, 2005, 2006 Hewlett-Packard Development Company, LP -->
<head>
<title>Oracle Database System HowTo</title>
<link href="../styles/doc.css" rel="stylesheet" type="text/css" />
</head>
<body>

<h1>HowTo Use Oracle Database System with Jena2</h1>

<h2>What is Oracle</h2>

<p><a href="http://www.oracle.com/">Oracle</a> is one of the leading, 
commercially-available SQL relational database management systems. It is 
available in a variety of configurations from small personal versions to 
fault-tolerant, enterprise-class versions. It runs on a variety of 
hardware/operating system platforms.</p>

<h2>Download and Installation of Oracle</h2>

<p>As Oracle is commercially-available software, we cannot provide generic 
download instructions. We assume that Jena users wishing to use Oracle have 
access to an existing Oracle installation or access to the software. Below we 
list some assumptions and post-installation instructions for using Oracle with 
Jena.</p>
<p>Jena2 can be run with
<a href="http://www.oracle.com/technology/products/database/xe/index.html">
Oracle XE</a> as well as the full commercial versions on both WindowsXP and 
Linux.</p>
<p>Jena2 can be run with both thin and thick drivers.</p>
<p>Currently, some configuration is necessary to work with all driver choices.</p>
<font SIZE="2">

<h2>Connecting Your Jena Program to Oracle</h2>

<p>Jena supports both memory models and database models. In general, a Jena program 
may use both types of models identically. However, there are some differences 
in how the models are created. Creating a memory model can be done with a single 
Jena call. Creating a database model, or opening a previously created one, 
requires several steps as as follows.</p>

<p><b>Important</b></p>
<ul>
  <li>Edit the source file <font face="Courier New" size="2">com.hp.hpl.jena.db.impl.Driver_Oracle.java</font>.</li>
  <li>Uncomment the Oracle import commands at the top of the file:<br>&nbsp<font face="Courier New" size="2">import oracle.jdbc.OracleResultSet;</font><br>&nbsp<font face="Courier New" size="2">import oracle.sql.BLOB;</font></li>
  <li>Comment-out the stubbed-out interfaces named BLOB and OracleResultSet.
  </li>
  <li>Recompile Jena.</li>
</ul>
<p>Persistent models are <a href="creating-db-models.html">created</a> in the 
same way for any database system: </p>
<blockquote>
  <ol>
    <li>Load the JDBC driver. This enables the Jena program to communicate with 
    the database instance.</li>
    <li>Create a database connection. This creates a Java object for a database 
    connection.</li>
    <li>Create a ModleMaker for the database</li>
    <li>Create a Model for existing or new data.</li>
  </ol>
</blockquote>

<p>These steps are illustrated in the following Java code.</p>

<pre class="box">String className = <font face="Courier New">&quot;oracle.jdbc.driver.DriverOracle&quot;</font>;         // path of driver class
Class.forName (className);                          // Load the Driver
String DB_URL =     <font face="Courier New">&quot;jdbc:oracle:oci:@&quot;</font>;  // URL of database 
String DB_USER =   &quot;????&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     // database user id
String DB_PASSWD = &quot;????&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // database password
String DB =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font face="Courier New">&quot;Oracle&quot;</font>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      // database type

// Create database connection
IDBConnection conn = new DBConnection ( URL, DB_USER, DB_PASSWD, DB );
ModelMaker maker = ModelFactory.createModelRDBMaker(conn)

// create or open the default model
Model model = maker.createModel();

// Close the database connection
conn.close();</pre>
<p></p>

<p></p>

<h2>Usage Notes</h2>

<p>Jena stores all models in a single database using whatever database (name) specified on the database connection. See the <a href="index.html">Jena Database Release Notes</a> for 
details on the physical layout.</p>

<h2>Known Bugs</h2>
<ol>
  <li>We encountered problems with BLOBs when using the Oracle 9 and the thin driver to access an Oracle database running on the Linux 
operating system, so we recommend use of the oci driver when using Linux.

  </li>
  <li>Under Linux and Oracle 9, in running the database TestPackage, we 
  get a Java warning that an SQLException was thrown when a thread attempts a 
  next operation on a database iterator over a closed database connection. This 
  appears to be a timing problem involving interaction with a finalize routine. 
  The test returns the correct result. The warning does not occur under WinXP.</li>
  </ol>

<p>Oracle 10 XE does not present these issues.</p>

</body>
</html>
