<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
  <TITLE>Using ARP Without Jena</TITLE>

 <LINK REL ="stylesheet" TYPE="text/css" 
	HREF="../javadoc/stylesheet.css" TITLE="Style">
 <link rel="stylesheet" type="text/css" href="../styles/doc.css" />
<style>
td { text-align:left; } 
  </style>
  </HEAD>
  <BODY>
  <h1>Using ARP Without Jena</h1>
<p>
ARP can be used both as a Jena subsystem, or
as a standalone RDF/XML parser.
This document gives a quick guide to using ARP standalone.
</p>
<h2>Contents</h2>

TODO

this doc

links with package.html

cross-links with sax.html

cross-links from ARP javadoc into this.


<h2><a name="overview">1. Overview</a></h2>
<p>
To load an RDF file:
</p>
<ol>
<li>Create an ARP.</li>
<li>Set parse options, particularly error detection control,
using getOptions or setOptionsWith.</li>
<li>Set its handlers, by calling the 
getHandlers or setHandlersWith
methods, and then.<ul>
<li>Setting the statement handler.</li>
<li>Optionally setting the other handlers.</li>
</ul>
</li>
<li>Call a load method.</li>
</ol>
<p>
Xerces is used for parsing the XML.
The SAXEvents generated by Xerces are then
analysed as RDF by ARP. It is possible to
use a different source of SAX events.
</p>
<p>
Errors may occur
in either the XML or the RDF part.</p>

<h2><a name="sample">Sample Code</a></h2>
<pre>
        ARP arp = new ARP();
        
 // initialisation - uses ARPConfig interface only.
 
        arp.getOptions().setLaxErrorMode();
        
        arp.getHandlers().setErrorHandler(new ErrorHandler(){
        	public void fatalError(SAXParseException e){
        		status[0] = true;
        	}
			public void error(SAXParseException e){
				status[0] = true;
			}
			public void warning(SAXParseException e){
				status[0] = true;
			}
        });
        arp.getHandlers().setStatementHandler(new StatementHandler(){
        public void statement(AResource a, AResource b, ALiteral l){
        	/* this method is invoked exactly once
        	 * while parsing the dummy document.
        	 * The l argument is in exclusive canonical XML and
        	 * corresponds to where the lexical form has been 
        	 * in the dummy document. The lexical form is valid
        	 * iff it is unchanged.
        	 */
        	if (status[1] || !l.isWellFormedXML()) {
				status[0] = true;
			}
			//throw new BrokenException("plain literal in XMLLiteral code.");
            status[1] = true;
            status[2] = l.toString().equals(lexicalForm);
        }
		public void statement(AResource a, AResource b, AResource l){
	      status[0] = true;
	      //throw new BrokenException("resource valued RDF/XML in XMLLiteral code.");
	    }
        });
 
 // parsing.
 
        try {
        
        arp.load(new StringReader(
        "<rdf:RDF  xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'>\n"
        +"<rdf:Description><rdf:value rdf:parseType='Literal'>"
        +lexicalForm+"</rdf:value>\n"
        +"</rdf:Description></rdf:RDF>"
        ));
        
        }
        catch (IOException ioe){
           throw new BrokenException(ioe);	
        }
        catch (SAXException s){
        	return false;
        }
</pre>        

<h2><a name="config">Configuring ARP</a></h2>

See I/O how to ...

<h2><a name="errors">Error Handling</a></h2>


Interrupting ARP
<p>See 
{@link ARPHandlers#setErrorHandler} for details
of how to distinguish between them.</p>


<h2><a name="sax2rdf">Using Other SAX Sources</a></h2>


<h2><a name="memory">Memory usage</a></h2>

<p>
For very large files, ARP does not use any additional
memory except when either the 
{@link ExtendedHandler#discardNodesWithNodeID}
returns false or when the 
{@link AResource#setUserData} 
method has been
used. 
In these cases ARP needs to remember the <code>rdf:nodeID</code>
usage through the file life time. </p>
        


<ul>
<li><a href="#rush">1. Rush Guide - Jena1 Migration (Must Read)</a>
<ul>
<li><a href="#rdfxml">1.1 RDF/XML, RDF/XML-ABBREV</a>
</li>
<li><a href="#n3">1.2 N3</a>
</li>
<li><a href="#ntriple">1.3 N-TRIPLE</a>
</li>
</ul>
<li><a href="#encoding">2. Character Encoding in Java and XML</a></li>
<li><a href="#reader-writer">3. When to Use Reader and Writer?</a></li>
<li><a href="#intro-advanced">4. Introduction to Advanced Jena I/O</a></li>
<li><a href="#input">5. Advanced RDF/XML Input</a>
<ul><li><a href="#arp-properties">
5.1 ARP properties</a></li>
<li><a href="#arp-interrupt">
5.2 Interrupting ARP</a></li>
</ul></li>
<li><a href="#output">6. Advanced RDF/XML Output</a></li>
<li><a href="#conformance">7. Conformance</a></li>
<li><a href="#speed">8. Faster RDF/XML I/O</a></li>

</ul>


 </BODY>
</HTML>