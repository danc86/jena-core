<project name="jena-internals" default="main" basedir=".">

    <property name="java.debug"      value="true"/>
    <property name="java.debuglevel" value="source,lines"/>
    <property name="java.deprecation"   value="false"/>
    <property name="java.optimize"   value="true"/>
    <property name="java.source"     value="1.4"/>
    <property name="java.target"     value="1.4"/>

    <property name="src.dir"         value="bldsrc"/>
    <property name="classes.dir"     value="bldbin"/>
    <property name="lib.dir"         value="lib"/>
    <property name="tools.bin"       value="tools-bin/"/>

    <path id="classpath">
        <fileset dir="${lib.dir}" includes="*.jar" excludes="${jarfile}"/>
    </path>

    <target name="main" depends="tools-compile,contrib">
    </target>

    <target name="pre-tools-compile" >
        <!-- Ensure a clean compile -->
        <delete dir="${tools.bin}"/>
        <mkdir dir="${tools.bin}"/>
    </target>

    <target name="tools-compile" depends="pre-tools-compile">
        <javac
            srcdir="internal-tools/src"
            destdir="${tools.bin}"
            debug="${debug}"
            deprecation="${deprecation}"
            optimize="${optimize}"
            source="${java.source}"
            target="${java.target}"
        >
            <classpath>
                <path refid="classpath"/>
                <pathelement path="${classes.dir}"/>
            </classpath>
        </javac>
    </target>

    <target name="contrib">
        <java classname="com.hp.hpl.jena.internal.tools.RDFtoTable">
            <arg value="doc/contrib/contributions-table.n3"/>
            <arg value="doc/contrib/contributions.n3"/>
            <redirector output="doc/contrib/table.tmp"/>
            <classpath>
                <pathelement path="${tools.bin}"/>
                <pathelement path="${classes.dir}"/>
                <path refid="classpath"/>
            </classpath>
        </java>
        <java classname="com.hp.hpl.jena.internal.tools.InsertFile">
            <arg value="doc/contrib/contrib-template.html"/>
            <arg value="doc/contrib/table.tmp"/>
            <redirector output="doc/contrib/contributions.html"/>
            <classpath>
                <pathelement path="${tools.bin}"/>
                <pathelement path="${classes.dir}"/>
                <path refid="classpath"/>
            </classpath>
        </java>
    </target>

</project>
